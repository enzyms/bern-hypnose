---
import siteConfig from '../data/site-config';
import Card from './Card.astro';

// Props
const { exclude, columns = 3 } = Astro.props;

// Get the subLinks array from the siteConfig
const subLinks = siteConfig.headerNavLinks?.[1]?.subLinks;

// Filter the subLinks to exclude the link specified in the props
const filteredSubLinks = subLinks?.filter((subLink) => subLink.href !== exclude);

// Determine the grid columns class based on the 'columns' prop
const gridColumnsClass = columns === 1 ? 'grid-cols-1' : columns === 2 ? 'grid-cols-2' : 'grid-cols-2 sm:grid-cols-3';
---

<nav class="py-4 md:py-6">
    {
        filteredSubLinks && filteredSubLinks.length > 0 && (
            <ul class={`grid ${gridColumnsClass} gap-4 not-prose list`}>
                {filteredSubLinks.map((subLink) => (
                    <li class="flex items-baseline group" key={subLink.href}>
                        <Card href={subLink.href} image={subLink.image} title={subLink.text} />
                    </li>
                ))}
            </ul>
        )
    }
</nav>
